<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ARMEmulator.ViewModels"
             xmlns:converters="using:ARMEmulator.Converters"
             x:DataType="vm:MainWindowViewModel"
             x:Class="ARMEmulator.Views.ConsoleView">
    <Border BorderThickness="1"
            CornerRadius="4"
            Padding="8">
        <Border.BorderBrush>
            <MultiBinding Converter="{x:Static converters:ConditionalValueConverter.Instance}">
                <Binding Path="IsWaitingForInput" />
                <Binding Source="Orange" />
                <Binding Source="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
            </MultiBinding>
        </Border.BorderBrush>

        <DockPanel>
            <!-- Header with status indicator -->
            <DockPanel DockPanel.Dock="Top" Margin="0,0,0,8">
                <TextBlock Text="Console Output"
                           FontWeight="SemiBold"
                           DockPanel.Dock="Left" />
                <Border DockPanel.Dock="Right"
                        Background="Orange"
                        CornerRadius="4"
                        Padding="6,2"
                        IsVisible="{Binding IsWaitingForInput}">
                    <TextBlock Text="⏸️ Waiting for input"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="White" />
                </Border>
            </DockPanel>

            <!-- Input area at bottom -->
            <StackPanel DockPanel.Dock="Bottom"
                        Orientation="Horizontal"
                        Spacing="8"
                        Margin="0,8,0,0">
                <TextBlock Text="Input:"
                           VerticalAlignment="Center" />
                <TextBox Width="400"
                         Text="{Binding InputText}"
                         Watermark="Enter input..."
                         VerticalAlignment="Center"
                         ToolTip.Tip="Enter input for the running program (press Enter or click Send)">
                    <TextBox.KeyBindings>
                        <KeyBinding Gesture="Enter" Command="{Binding SendInputCommand}" />
                    </TextBox.KeyBindings>
                </TextBox>
                <Button Content="Send"
                        Command="{Binding SendInputCommand}"
                        VerticalAlignment="Center"
                        ToolTip.Tip="Send input to program (Enter)" />
            </StackPanel>

            <!-- Output area with auto-scroll -->
            <ScrollViewer Name="OutputScrollViewer"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Auto">
                <TextBox Text="{Binding ConsoleOutput}"
                         IsReadOnly="True"
                         BorderThickness="0"
                         Background="Transparent"
                         FontFamily="Consolas,Menlo,Monaco,Courier New,monospace"
                         TextWrapping="NoWrap"
                         AcceptsReturn="True" />
            </ScrollViewer>
        </DockPanel>
    </Border>
</UserControl>
